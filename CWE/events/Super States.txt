#Superstate - Integration flag
country_event = {
	id = 1412111
title = "Rise of the $COUNTRY_ADJ$ identity"
	desc = "As we are a superstate, the old national identities are now being replaced by a new sense of belonging to $COUNTRY$. Citizens will now start to identify themselves as $COUNTRYCULTURE$."
	picture = "superstate_push"

trigger = {

NOT = { has_country_flag = superstate_integration_boost }
OR = { 
tag = XGC
tag = XEF
tag = XEU
tag = XCC
tag = XAU
tag = XEW
tag = XEC
tag = XSA
tag = XSU
tag = XMS
tag = XAC
tag = XAL
tag = XMU
tag = XAN
tag = XCI
tag = XNA
tag = XPI
tag = XEA
tag = XTC
tag = XUM
tag = XIO
}
}

option = {
name = "Excellent"
prestige = 10
set_country_flag = superstate_integration_boost
		}

}

#Superstate - Integration flag remove
country_event = {
	id = 1412112
title = "Decline of the $COUNTRY_ADJ$ identity"
	desc = "As we are no longer a superstate, the old national identities are now being replaced by a new sense of belonging to $COUNTRY$. Citizens will now start to identify themselves as $COUNTRYCULTURE$."
	picture = "superstate_push"

trigger = {
has_country_flag = superstate_integration_boost
NOT = { OR = { 
tag = XGC
tag = XEF
tag = XEU
tag = XCC
tag = XAU
tag = XEW
tag = XEC
tag = XSA
tag = XSU
tag = XMS
tag = XAC
tag = XAL
tag = XMU
tag = XAN
tag = XCI
tag = XNA
tag = XPI
tag = XEA
tag = XTC
tag = XUM
tag = XIO
} }
}

option = {
name = "A new beginning for $COUNTRY$"
clr_country_flag = superstate_integration_boost
		}

}

#Call to join superstate
country_event = {
	id = 1610001
	title = "Foundation of $COUNTRY$"
	desc = EVTDESC1610001
	picture = "superstate_formation_event"

	trigger = {
		OR = {
			tag = XGC
			tag = XEF
			tag = XEU
			tag = XCC
			tag = XAU
			tag = XEW
			tag = XEC
			tag = XSA
			tag = XSU
			tag = XMS
			tag = XAC
			tag = XAL
			tag = XMU
			tag = XAN
			tag = XCI
			tag = XNA
			tag = XPI
			tag = XEA
			tag = XTC
			tag = XUM
			tag = XIO
		}
		war = no
		is_vassal = no
		NOT = { has_country_flag = superstate_formation_event }
	}

	option = {
		name = "Congratulations to ourselves!"
		prestige = 500

		#Invitations are continent bound
		#Rules for annexation: Spheres only get annexed if they are in the same continent, not a mandate and did not lose a war recently
		random_owned = {
			limit = {
				is_capital = yes
				continent = europe
			} 
			owner = { 
				any_country = { 
					limit = {
						in_sphere = THIS
						NOT = {
							OR = {
								government = mandate_government
								has_recently_lost_war = yes
							}
						}
						capital_scope = { continent = europe }
					}
					country_event = 1610002
				}
			}
		}

		random_owned = {
			limit = {
				is_capital = yes
				continent = asia
			} 
			owner = { 
				any_country = { 
					limit = {
						in_sphere = THIS
						NOT = {
							OR = {
								government = mandate_government
								has_recently_lost_war = yes
							}
						}
						capital_scope = { continent = asia }
					}
					country_event = 1610002
				}
			}
		}

		random_owned = {
			limit = {
				is_capital = yes
				continent = africa
			} 
			owner = { 
				any_country = { 
					limit = {
						in_sphere = THIS
						NOT = {
							OR = {
								government = mandate_government
								has_recently_lost_war = yes
							}
						}
						capital_scope = { continent = africa }
					}
					country_event = 1610002
				}
			}
		}

		random_owned = {
			limit = {
				is_capital = yes
				continent = mena
			} 
			owner = { 
				any_country = { 
					limit = {
						in_sphere = THIS
						NOT = {
							OR = {
								government = mandate_government
								has_recently_lost_war = yes
							}
						}
						capital_scope = { continent = mena }
					}
					country_event = 1610002
				}
			}
		}

		random_owned = {
			limit = {
				is_capital = yes
				continent = north_america
			} 
			owner = { 
				any_country = { 
					limit = {
						in_sphere = THIS
						NOT = {
							OR = {
								government = mandate_government
								has_recently_lost_war = yes
							}
						}
						capital_scope = { continent = north_america }
					}
					country_event = 1610002
				}
			}
		}

		random_owned = {
			limit = {
				is_capital = yes
				continent = south_america
			} 
			owner = { 
				any_country = { 
					limit = {
						in_sphere = THIS
						NOT = {
							OR = {
								government = mandate_government
								has_recently_lost_war = yes
							}
						}
						capital_scope = { continent = south_america }
					}
					country_event = 1610002
				}
			}
		}

		random_owned = {
			limit = {
				is_capital = yes
				continent = oceania
			} 
			owner = { 
				any_country = { 
					limit = {
						in_sphere = THIS
						NOT = {
							OR = {
								government = mandate_government
								has_recently_lost_war = yes
							}
						}
						capital_scope = { continent = oceania }
					}
					country_event = 1610002
				}
			}
		}

		#Vassals get fully incorporated into the superstate but only if the vassal is not a mandate, did not lose a war and has the superstate's (THIS) cores in their capital
		any_country = {
			limit = {
				vassal_of = THIS
				capital_scope = { is_core = THIS }
				NOT = {
					OR = {
						government = mandate_government
						has_recently_lost_war = yes
					}
				}
			}
			country_event = 11101
		}
		set_country_flag = superstate_formation_event
	}

}

#Call to join superstate
country_event = {
	id = 1610002
	title = "Union with $FROMCOUNTRY$?"
	desc = EVTDESC1610002
	picture = "superstate_formation_event"
	is_triggered_only = yes
	
	option = {
		name = "We shall unite!"
		FROM = { prestige = 50 country_event = 11107 }
		ai_chance = { 
			factor = 1 
			modifier = { 
				factor = 0 
				FROM = { OR = { government = democracy government = democracy1 government = socialist_democracy government = hms_government government = hms_government1 } }

				NOT = { OR = { government = democracy government = democracy1 government = socialist_democracy government = hms_government government = hms_government1 } }
			}
		}
	}

	option = {
		name = "Stay out of the union!"
		relation = { who = FROM value = -50 }
		FROM = { diplomatic_influence = { who = THIS value = -100 } }
		ai_chance = { factor = 1 }
	}

}

#Superstate dissolution event
country_event = {
	id = 1610027
	title = "Dissolution of $COUNTRY$"
	desc = "With the total dismemberment of $COUNTRY$, the union has been dissolved."
	picture = "communist_cleanup"

	major = yes

	trigger = {
		OR = {
			tag = XGC
			tag = XEF
			tag = XEU
			tag = XCC
			tag = XAU
			tag = XEW
			tag = XEC
			tag = XSA
			tag = XSU
			tag = XMS
			tag = XAC
			tag = XAL
			tag = XMU
			tag = XAN
			tag = XCI
			tag = XNA
			tag = XPI
			tag = XEA
			tag = XTC
			tag = XUM
			tag = XIO
			tag = XME
			
			tag = UAR
			tag = YUG
			tag = IBU
			tag = KLM
			tag = PBC
			tag = GCL
			
			tag = ENG
			tag = FBU
			tag = BEL
			tag = KUK
			tag = PCC
			tag = RBU
			tag = CZH
		}

		OR = {
			#General situation
			NOT = { num_of_cities = 2 }
			
			#FBU collapses if England or the UK or France exists independently
			AND = { 
				tag = FBU 
				OR = { 
					ENL = { exists = yes is_vassal = no } 
					ENG = { exists = yes is_vassal = no } 
					FRA = { exists = yes is_vassal = no } 
				}
			}
			
			#BEL collapses if Wallonia or Flanders exists independently
			AND = { 
				tag = BEL 
				OR = { 
					WLL = { exists = yes is_vassal = no } 
					FLA = { exists = yes is_vassal = no } 
				}
			}
			
			#KUK collapses if Austria or Hungary exists independently
			AND = { 
				tag = KUK
				OR = { 
					AUS = { exists = yes is_vassal = no } 
					HUN = { exists = yes is_vassal = no } 
				}
			}
			
			#PCC collapses if Poland or Czechoslovakia exists independently
			AND = { 
				tag = PCC
				OR = { 
					POL = { exists = yes is_vassal = no } 
					CZH = { exists = yes is_vassal = no } 
				}
			}
			
			#YUG collapses if Serbia exists independently
			AND = { 
				tag = YUG
				
					SER = { exists = yes is_vassal = no } 
					
			}
			
			#RBU collapses if Russia or Belarus exists independently
			AND = { 
				tag = RBU
				OR = { 
					RUS = { exists = yes is_vassal = no } 
					BYE = { exists = yes is_vassal = no } 
				}
			}
			
			#CZH collapses if Czechia or Slovakia exists independently
			AND = { 
				tag = CZH
				OR = { 
					BOH = { exists = yes is_vassal = no } 
					SLV = { exists = yes is_vassal = no } 
				}
			}
			
		}
		
		OR = {
			#General situation
			NOT = { num_of_vassals = 1 }
			
			#FBU collapses if England or the UK or France exists independently
			AND = { 
				tag = FBU 
				OR = { 
					#ENL = { exists = yes is_vassal = no } 
					ENG = { exists = yes is_vassal = no } 
					FRA = { exists = yes is_vassal = no } 
				}
			}
			
			#BEL collapses if Wallonia or Flanders exists independently
			AND = { 
				tag = BEL 
				OR = { 
					WLL = { exists = yes is_vassal = no } 
					FLA = { exists = yes is_vassal = no } 
				}
			}
			
			#KUK collapses if Austria or Hungary exists independently
			AND = { 
				tag = KUK
				OR = { 
					AUS = { exists = yes is_vassal = no } 
					HUN = { exists = yes is_vassal = no } 
				}
			}
			
			#PCC collapses if Poland or Czechoslovakia exists independently
			AND = { 
				tag = PCC
				OR = { 
					POL = { exists = yes is_vassal = no } 
					CZH = { exists = yes is_vassal = no } 
				}
			}
			
			#YUG collapses if Serbia exists independently
			AND = { 
				tag = YUG
				
					SER = { exists = yes is_vassal = no }
				
			}
			
			#RBU collapses if Russia or Belarus exists independently
			AND = { 
				tag = RBU
				OR = { 
					RUS = { exists = yes is_vassal = no } 
					BYE = { exists = yes is_vassal = no } 
				}
			}
			
			#CZH collapses if Czechia or Slovakia exists independently
			AND = { 
				tag = CZH
				OR = { 
					BOH = { exists = yes is_vassal = no } 
					SLV = { exists = yes is_vassal = no } 
				}
			}
		}

	}

	option = {
		name = "Its a sad day in $COUNTRY_ADJ$ history!"
		any_country = { 
			limit = { any_core = { owned_by = THIS } } 
			country_event = 1610028 
		}
	}

}

#Superstate dissolution - acquire last superstate province
country_event = {
	id = 1610028
title = "Dissolution of $FROMCOUNTRY$"
	desc = "With the dissolution of $FROMCOUNTRY$, we can get our cored lands back."
	picture = "treaty"

is_triggered_only = yes

option = {
name = "At least we got our sovereign territory back!"
prestige = 50
FROM = { any_owned = { limit = { is_core = THIS } secede_province = THIS } }
		}

}